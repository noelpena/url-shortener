---
import Button from "./Button.jsx";
import Logo from "./Logo.astro";

import closeIcon from "/images/icon-close.svg";
import hamburger from "/images/icon-hamburger.svg";
---

<nav>
	<a href="#">
		<Logo color="#232127" />
	</a>
	<ul>
		<div id="main-links">
			<li><a href="##">Features</a></li>
			<li><a href="##">Pricing</a></li>
			<li><a href="##">Resources</a></li>
		</div>

		<div id="cta-links">
			<li><a href="##">Login</a></li>
			<li><Button text="Sign Up" is_small={true} /></li>
		</div>
	</ul>
	<div id="mobile-nav" style="display: none">
		<img src={hamburger.src} alt="hamburger menu icon" />
	</div>
</nav>

<div id="mobile_nav_menu" style="opacity: 0; visibility: hidden">
	<div role="navigation" aria-label="mobile-navigation">
		<ul>
			<li><a href="##">Features</a></li>
			<li><a href="##">Pricing</a></li>
			<li><a href="##">Resources</a></li>
			<hr />
			<li><a href="##">Login</a></li>
			<Button text="Sign Up" />
		</ul>
	</div>
</div>

<style>
	nav {
		margin: 3rem auto 0;
		display: flex;
		gap: 45px;
		max-width: 1440px;
		align-items: center;
		background-color: #fff;
	}

	nav img {
		max-width: 100%;
		height: 35px;
		display: block;
	}

	nav ul {
		display: flex;
		align-items: center;
		justify-content: space-between;
		flex: 1;
		margin: 0;
		padding: 0;
	}

	nav ul li {
		list-style-type: none;
	}
	nav ul li a {
		text-decoration: none;
		color: #9e9aa8;
		font-weight: bold;
	}
	nav ul li a:hover {
		color: #34313d;
	}

	nav ul > div {
		display: flex;
		gap: 30px;
		align-items: center;
	}

	#mobile_nav_menu {
		position: absolute;
		left: 0;
		display: none;
	}

	@media screen and (max-width: 768px) {
		nav {
			padding-left: 1rem !important;
			padding-right: 1rem !important;
			margin-top: 2rem;
			justify-content: space-between;
		}

		nav ul {
			display: none;
		}

		#mobile-nav img {
			display: block;
			max-width: 100%;
			height: auto;
			width: 28px;
			height: 20px;
			cursor: pointer;
		}

		#mobile-nav img.open-menu-icon {
			height: auto;
		}

		#mobile-nav {
			display: block !important;
		}

		#mobile_nav_menu {
			position: absolute;
			left: 0;
			background-color: #3a3054;
			border-radius: 10px;
			width: calc(100% - 6rem);
			height: 383px;
			padding: 2rem;
			margin-top: 1rem;
			margin: 1rem;
			z-index: 5;
			transition: 0.15s ease-in-out all;
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
		}

		#mobile_nav_menu div {
			width: 100%;
		}

		#mobile_nav_menu ul {
			margin: 0;
			padding: 0;
			text-align: center;
			display: flex;
			flex-direction: column;
			gap: 1.5rem;
		}

		#mobile_nav_menu ul hr {
			background-color: #9e9aa8;
			opacity: 0.5;
			width: 100%;
		}

		#mobile_nav_menu ul li {
			list-style-type: none;
		}

		#mobile_nav_menu ul li a {
			text-decoration: none;
			color: #fff;
			font-size: 1.35rem;
			font-weight: 700;
		}

		#mobile_nav_menu ul li a:hover {
			color: #2bd0d0;
		}
	}
</style>

<script define:vars={{ closeIcon, hamburger }}>
	const hamburgerBtn = document.getElementById("mobile-nav");
	const mobileMenu = document.getElementById("mobile_nav_menu");

	if (mobileMenu) {
		hamburgerBtn.addEventListener("click", (e) => {
			console.dir(mobileMenu);
			let imgSrc = hamburgerBtn.children[0].src;
			if (imgSrc.includes("icon-hamburger")) {
				hamburgerBtn.children[0].src = closeIcon.src;
				hamburgerBtn.children[0].classList.add("open-menu-icon");
				mobileMenu.style.opacity = 1;
				mobileMenu.style.visibility = "visible";
			} else if (imgSrc.includes("icon-close")) {
				hamburgerBtn.children[0].classList.remove("open-menu-icon");
				hamburgerBtn.children[0].src = hamburger.src;
				mobileMenu.style.opacity = 0;
				mobileMenu.style.visibility = "hidden";
			}
		});
	}
</script>
