import{r as c}from"./index.DhYZZe0J.js";/* empty css                       */var h={exports:{}},d={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x=c,_=Symbol.for("react.element"),j=Symbol.for("react.fragment"),y=Object.prototype.hasOwnProperty,S=x.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,v={key:!0,ref:!0,__self:!0,__source:!0};function m(o,t,s){var e,i={},a=null,n=null;s!==void 0&&(a=""+s),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(n=t.ref);for(e in t)y.call(t,e)&&!v.hasOwnProperty(e)&&(i[e]=t[e]);if(o&&o.defaultProps)for(e in t=o.defaultProps,t)i[e]===void 0&&(i[e]=t[e]);return{$$typeof:_,type:o,key:a,ref:n,props:i,_owner:S.current}}d.Fragment=j;d.jsx=m;d.jsxs=m;h.exports=d;var r=h.exports;function b({text:o,type:t="button",is_small:s=!1,has_square_edges:e=!1}){s=s||!1,e=e||!1;let i=(e?" btn-square":"")+(s?" btn-small":"");return r.jsx("button",{type:t,className:i,children:o})}function E({urlData:o,handleUrlDataChange:t}){const[s,e]=c.useState(null);function i(n){e(n),setTimeout(()=>a(),3e3);const l=o.find(p=>p.hash===n);l&&navigator.clipboard.writeText(l.short_url)}function a(){e(null)}return r.jsx("div",{id:"saved-urls-wrap",children:o.map(n=>r.jsxs("article",{children:[r.jsx("p",{style:{margin:0,padding:0},children:n.long_url}),r.jsxs("div",{id:"link_btn_wrap",children:[r.jsx("span",{children:n.short_url}),r.jsx("button",{className:s===n.hash?"btn-clicked":"",onClick:()=>i(n.hash),type:"button",children:s===n.hash?"Copied!":"Copy"})]})]},n.hash))})}const f="NP_URL_SHORTENER";function R(){const[o,t]=c.useState(!1),[s,e]=c.useState([]);c.useEffect(()=>{const l=localStorage.getItem(f);l&&n(JSON.parse(l))},[]),c.useEffect(()=>{localStorage.setItem(f,JSON.stringify(s))},[s]);function i(l){l.preventDefault(),t(!1);const p=document.querySelector("input");if(p){const u=p.value;if(u===""||u===null){t(!0);return}a(u)}}async function a(l){const u=await(await fetch("api/hash",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:l})})).json();console.log(u),e([...s,u])}function n(l){e([...l])}return r.jsxs("section",{id:"url-input",children:[r.jsxs("form",{className:"url-input-form",onSubmit:i,children:[r.jsxs("div",{id:"url-input-wrap",children:[r.jsx("input",{className:o?"input-error":"",type:"text",placeholder:"Shorten a link here..."}),r.jsx(b,{type:"submit",text:"Shorten it!",has_square_edges:!0})]}),o&&r.jsx("span",{id:"input-error-text",children:r.jsx("em",{children:"Please add a link"})})]}),r.jsx(E,{urlData:s,handleUrlDataChange:n})]})}export{R as default};
